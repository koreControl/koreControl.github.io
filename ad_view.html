<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<!-- REQUIRED for correct scaling -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- REQUIRED for broken creative assets -->
<base href="https://korecontrol.github.io/">

<title>Ad Processor</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    background: #050505;
    overflow: hidden;
    font-family: monospace;
}

/* ---------- AD CONTAINER ---------- */
#ad-container {
    width: 100%;
    height: 100%;
    background: #fff;
    display: block;
}

/* ---------- COOLDOWN UI ---------- */
#cooldown {
    width: 100%;
    height: 100%;
    display: none;
    background: #050505;
    color: orange;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

#cooldown h2 {
    margin: 6px;
    font-size: 18px;
}

#cooldown p {
    margin: 4px;
    font-size: 12px;
    color: #aaa;
}

/* Loader */
.loader {
    width: 20px;
    height: 20px;
    border: 2px solid #333;
    border-top: 2px solid orange;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-top: 10px;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to   { transform: rotate(360deg); }
}
</style>
</head>

<body>

<div id="ad-container"></div>

<div id="cooldown">
    <h2>COOLING DOWN</h2>
    <p>Next ad in <span id="count">--</span>s</p>
    <div class="loader"></div>
</div>

<script>
/* ================= CONFIG ================= */
const SMARTLINK = "https://www.effectivegatecpm.com/cw1ee9zt3?key=166a8de6e9417228de30d751d42c81fb";
const VIEW_TIME = 20000;   // 20s
const COOLDOWN  = 40000;   // 40s
/* ========================================== */

let countdownInterval = null;

/* ---------- AD ---------- */
function showAd() {
    clearInterval(countdownInterval);

    const ad = document.getElementById("ad-container");
    const cd = document.getElementById("cooldown");

    cd.style.display = "none";
    ad.style.display = "block";
    ad.innerHTML = "";

    const iframe = document.createElement("iframe");
    iframe.src = SMARTLINK;
    iframe.style.width = "100%";
    iframe.style.height = "100%";
    iframe.style.border = "none";
    iframe.setAttribute("scrolling", "no");

    ad.appendChild(iframe);

    // Hard, fraud-safe timing
    setTimeout(showCooldown, VIEW_TIME);
}

/* ---------- COOLDOWN ---------- */
function showCooldown() {
    const ad = document.getElementById("ad-container");
    const cd = document.getElementById("cooldown");

    ad.style.display = "none";
    cd.style.display = "flex";

    let remaining = COOLDOWN / 1000;
    document.getElementById("count").innerText = remaining;

    countdownInterval = setInterval(() => {
        remaining--;
        document.getElementById("count").innerText = remaining;

        if (remaining <= 0) {
            clearInterval(countdownInterval);
            showAd();
        }
    }, 1000);
}

/* ---------- START ---------- */
showAd();
</script>

</body>
</html>
